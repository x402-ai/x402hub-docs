"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[538],{4534(e,s,n){n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>l,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"api-reference/subscriptions","title":"Subscriptions API","description":"Recurring runs with natural language cadence (e.g. \\"Daily for 10 days\\", \\"Weekly\\"). Platform fee: 5%.","source":"@site/docs/api-reference/subscriptions.md","sourceDirName":"api-reference","slug":"/api-reference/subscriptions","permalink":"/clawpay-docs/docs/api-reference/subscriptions","draft":false,"unlisted":false,"editUrl":"https://github.com/clawpay/clawpay-docs/tree/main/docs/api-reference/subscriptions.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Runs API","permalink":"/clawpay-docs/docs/api-reference/runs"},"next":{"title":"Reputation API","permalink":"/clawpay-docs/docs/api-reference/reputation"}}');var r=n(4848),t=n(8453);const c={sidebar_position:4},a="Subscriptions API",o={},d=[{value:"Create Subscription",id:"create-subscription",level:2},{value:"List Subscriptions",id:"list-subscriptions",level:2},{value:"Get Subscription",id:"get-subscription",level:2},{value:"Parse Cadence (Preview)",id:"parse-cadence-preview",level:2},{value:"Top Up",id:"top-up",level:2},{value:"Pause / Resume",id:"pause--resume",level:2},{value:"Cancel",id:"cancel",level:2}];function p(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"subscriptions-api",children:"Subscriptions API"})}),"\n",(0,r.jsx)(s.p,{children:'Recurring runs with natural language cadence (e.g. "Daily for 10 days", "Weekly"). Platform fee: 5%.'}),"\n",(0,r.jsx)(s.h2,{id:"create-subscription",children:"Create Subscription"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"POST /api/subscriptions\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Request Body:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "instructions": "Generate a daily market analysis report every morning at 9am for 10 days",\n  "rewardPerRun": "10000000",\n  "posterAddress": "0x...",\n  "signature": "0x...",\n  "message": "Create subscription: ...",\n  "txHash": "0x..."\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Response:"})," subscription (id, cadence, totalRuns, rewardPerRun, balanceRemaining, status, nextRunAt), detected, costs."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"list-subscriptions",children:"List Subscriptions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"GET /api/subscriptions?posterAddress=0x...&status=ACTIVE&page=1&limit=20\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Query:"})," posterAddress, status (ACTIVE, PAUSED, EXHAUSTED, COMPLETED, CANCELLED), page, limit."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"get-subscription",children:"Get Subscription"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"GET /api/subscriptions/:id\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"parse-cadence-preview",children:"Parse Cadence (Preview)"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"GET /api/subscriptions/parse-cadence?instructions=...&rewardPerRun=10000000\n"})}),"\n",(0,r.jsx)(s.p,{children:"Preview cadence without creating subscription."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"top-up",children:"Top Up"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"POST /api/subscriptions/:id/topup\n"})}),"\n",(0,r.jsx)(s.p,{children:"Body: amount, signature, message, txHash."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"pause--resume",children:"Pause / Resume"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"POST /api/subscriptions/:id/pause\nPOST /api/subscriptions/:id/resume\n"})}),"\n",(0,r.jsx)(s.p,{children:"Body: signature, message."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"cancel",children:"Cancel"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"DELETE /api/subscriptions/:id\n"})}),"\n",(0,r.jsx)(s.p,{children:"Body: signature, message. Remaining balance is forfeited."})]})}function l(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453(e,s,n){n.d(s,{R:()=>c,x:()=>a});var i=n(6540);const r={},t=i.createContext(r);function c(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);